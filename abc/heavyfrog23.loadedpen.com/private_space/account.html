<!DOCTYPE html>
<html>
	<head>
		<script>
			async function update(id) {
				const $input = document.getElementById(id)
					, resp = await fetch(`/~/private_space/account/todo`, {
						method: 'PATCH'
						, headers: {'Content-Type': 'application/json' }
						, body: JSON.stringify({task: $input.value, id })
					})
				;
				location.reload();
			}
			
			async function remove(id) {
				const $input = document.getElementById(id)
					, resp = await fetch(`/~/private_space/account/todo`, {
						method: 'DELETE'
						, headers: {'Content-Type': 'application/json' }
						, body: JSON.stringify({ id })
					})
				;
				location.reload();
			}
			
			async function getcontactdata() {
				const resp = await fetch('/~/private_space/contact/contact?all=true')
					, json = await resp.json()
				;
				alert(JSON.stringify(json, null, 4))
			}
		</script>
	</head>
	<body>
		
		<h1>Welcome {{name}}!</h1>
		<h2>{{username}}</h2>
		<h3>Age is {{age}}</h3>
		<h2>Grade is {{grade}}</h2>
		
		<img src='{{profile}}'>
		{{#private}}
		<h3>Phone number is {{phone}}</h3>
		{{/private}}
		
		<h2>Your Todos:</h2>
		<form action='/~/private_space/account/todo' method='POST' >
			<input type='text' name='task' placeholder='Enter To Do'>
			<button>Create To DO</button>	
		</form>
		<ul>
			{{#todo}}
				<li>
					<input type='text' value='{{task}}' id='{{_id}}'>
					{{#private}}
						<span onclick='remove("{{_id}}")'>üóëÔ∏è</span>
						<span onclick='update("{{_id}}")'>üíæ</span>
					{{/private}}
				</li>
			{{/todo}}
		</ul>
		
		<button onclick='getcontactdata()'>Get Contact Data</button>
		
		<table>
		{{#simple.activity}}
			<tr>
				<td>{{title}}</td>
				<td>{{when}}</td>
				<td><img src='{{img}}'></td>
			</tr>
		{{/simple.activity}}
		</table>
	</body>
</html>